# 斐波那契数列模周期 - 完整使用指南

## 概述

本项目提供了一套完整的工具，用于计算和可视化斐波那契数列在模运算下的周期规律。

## 已创建的文件

### 核心文件
- **fibonacci_mod.cpp** - C++高性能计算核心（已修复编译错误）
- **fibonacci-mod-visualizer.html** - 网页版可视化工具
- **compile.sh** - 自动编译脚本（支持C++11标准）

### 命令行工具（新增）
- **fibonacci_cli_visualizer.py** - Python交互式可视化工具（需要matplotlib）
- **fibonacci_cli_simple.py** - Python轻量级可视化工具（无需外部依赖）
- **quickstart.sh** - 一键启动脚本

### 文档
- **README_CLI.md** - 命令行工具说明
- **使用指南.md** - 本文件

## 快速开始

### 方法1：一键启动（推荐）

```bash
bash quickstart.sh
```

这个脚本会自动：
1. 检查并编译C++程序
2. 检查Python依赖
3. 启动交互式命令行工具

### 方法2：手动步骤

#### 1. 编译C++程序

```bash
bash compile.sh
```

或使用g++：
```bash
g++ -std=c++11 -O3 -o fibonacci_mod fibonacci_mod.cpp
```

#### 2. 运行命令行工具

**选项A：功能完整的可视化（需要matplotlib）**

```bash
# 先安装依赖
pip3 install matplotlib numpy

# 运行工具
python3 fibonacci_cli_visualizer.py
```

**选项B：轻量级ASCII可视化（无需依赖）**

```bash
python3 fibonacci_cli_simple.py
```

#### 3. 使用网页版工具

直接用浏览器打开 `fibonacci-mod-visualizer.html` 文件

## 功能详解

### C++计算核心

**功能特点：**
- 高性能计算，支持模数高达1,000,000
- 自动检测并去重所有周期
- 输出标准JSON格式
- 进度显示（大模数时）

**直接使用：**
```bash
./fibonacci_mod <模数>
./fibonacci_mod 1000              # 计算模1000
./fibonacci_mod 10000 > data.json # 保存结果
```

**性能参考：**
- 模数 < 1000：非常快（< 1秒）
- 模数 < 10000：较快（几秒）
- 模数 < 100000：较慢（几分钟）
- 模数 > 100000：很慢（可能几十分钟）

### 命令行交互工具

#### 主菜单功能

1. **计算新的模数**
   - 输入模数（1-1000000）
   - 自动调用C++程序计算
   - 显示计算结果和统计信息

2. **选择要可视化的数列**
   - 查看所有数列列表
   - 支持灵活的范围选择
   - 支持全选/清空操作

3. **生成可视化**
   - 完整版：生成matplotlib图表
   - 轻量版：生成ASCII字符图
   - 支持导出图片（完整版）

4. **查看数列详情**
   - 显示所有数列
   - 显示长度和内容预览
   - 彩色标记已选项

5. **导出数据**
   - 保存为JSON文件
   - 包含完整计算结果
   - 记录选择状态

#### 范围选择语法

支持多种灵活输入方式：

- **单个索引**：`5`（选择第5个数列）
- **连续范围**：`3-7`（选择3到7）
- **多个范围**：`1-3,5,8-10`（组合选择）
- **特殊命令**：
  - `all` - 选择所有数列
  - `clear` - 清空选择
  - `done` - 完成选择
  - `back` - 返回上级

**示例：**
```
输入: 3-5,6,7-21
结果: 选择索引为3,4,5,6,7,8,...,21的数列
```

### 网页版工具

**特点：**
- 图形化界面，操作直观
- 实时交互，响应迅速
- 支持导出PNG图片
- 适合展示和演示

**使用方法：**
1. 用浏览器打开HTML文件
2. 在输入框中输入模数
3. 点击数列进行选择
4. 查看可视化结果
5. 可导出为图片

## 使用示例

### 示例1：探索小模数规律

```bash
# 启动工具
python3 fibonacci_cli_simple.py

# 选择菜单: 1. 计算新的模数
# 输入: 8

# 等待计算完成...

# 选择菜单: 2. 选择要可视化的数列
# 输入: all

# 选择菜单: 3. 生成ASCII可视化
```

**结果分析：**
- 模8会产生多个周期
- 观察不同周期的长度和模式
- 理解斐波那契数列的模周期性质

### 示例2：研究特定范围

```bash
# 计算模100
./fibonacci_mod 100

# 启动交互工具
python3 fibonacci_cli_simple.py

# 选择菜单1，输入100

# 选择菜单2，输入: 0-5,10-15
# （选择前6个和第10-15个数列）

# 选择菜单3生成可视化
```

### 示例3：大数据导出

```bash
# 计算大模数（可能需要较长时间）
./fibonacci_mod 10000 > large_data.json

# 使用Python工具加载和分析
python3 fibonacci_cli_simple.py
# 选择菜单5导出更方便的格式
```

## 故障排除

### 编译错误

**问题**：`error: static_assert failed`

**解决**：已修复，确保使用最新版的`fibonacci_mod.cpp`

### Python依赖问题

**问题**：`ModuleNotFoundError: No module named 'matplotlib'`

**解决**：
- 方案A：安装matplotlib
  ```bash
  pip3 install matplotlib numpy
  ```
- 方案B：使用轻量级版本
  ```bash
  python3 fibonacci_cli_simple.py
  ```

### 性能问题

**问题**：大模数计算太慢

**解决**：
- 模数>100000时，请耐心等待
- 可使用`nohup`后台运行：
  ```bash
  nohup ./fibonacci_mod 200000 > result.json &
  ```
- 或使用`screen`/`tmux`保持会话

### 权限问题

**问题**：`Permission denied`

**解决**：
```bash
chmod +x compile.sh quickstart.sh fibonacci_cli*.py
```

## 技术细节

### C++算法优化

- 使用`unordered_set`和`unordered_map`快速查找
- 智能哈希函数设计
- 内存预分配减少开销
- 迭代次数限制防止无限循环

### 可视化原理

- 每个周期生成坐标对序列 (a, b)
- 在二维网格中标记坐标
- 不同周期使用不同颜色
- 观察周期在模空间中的分布模式

### 数学背景

斐波那契数列模m的周期称为**Pisano周期**。对于任意正整数m，斐波那契数列模m都是周期性的。这个工具帮助可视化这些周期的结构和分布。

## 更新日志

### 2025-12-30
- 修复C++代码编译错误（哈希函数问题）
- 添加命令行交互式工具（完整版和轻量版）
- 创建一键启动脚本
- 完善文档和使用指南

## 许可证

MIT License

## 联系方式

如有问题或建议，欢迎反馈！
